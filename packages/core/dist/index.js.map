{"version":3,"sources":["../src/types/staff.ts","../src/types/campaign.ts","../src/types/delivery.ts","../src/types/pricing.ts","../src/tenant.ts","../src/utils/money.ts","../src/utils.ts","../src/utils/placements.ts","../src/utils/whatsapp.ts","../src/utils/option-groups.ts","../src/mock-data/index.ts"],"sourcesContent":["export type Role = 'OWNER' | 'MANAGER' | 'STAFF';\r\n\r\nexport const ROLE_PERMISSIONS: Record<Role, { catalog: 'read' | 'write'; orders: 'read' | 'write'; campaigns: 'read' | 'write'; settings: 'read' | 'write' }> = {\r\n  OWNER: { catalog: 'write', orders: 'write', campaigns: 'write', settings: 'write' },\r\n  MANAGER: { catalog: 'write', orders: 'write', campaigns: 'write', settings: 'read' },\r\n  STAFF: { catalog: 'read', orders: 'write', campaigns: 'read', settings: 'read' },\r\n};\r\n\r\nexport interface StaffUser {\r\n  id: string;\r\n  tenantId: string;\r\n  name: string;\r\n  phone?: string;\r\n  email?: string;\r\n  role: Role;\r\n  createdAt: string;\r\n}\r\n","import { z } from 'zod';\r\n\r\nexport const CampaignStatusSchema = z.enum(['draft', 'active', 'paused']);\r\nexport type CampaignStatus = z.infer<typeof CampaignStatusSchema>;\r\n\r\nexport const CampaignTypeSchema = z.enum(['PERCENT', 'FIXED', 'BUNDLE_PLACEHOLDER']);\r\nexport type CampaignType = z.infer<typeof CampaignTypeSchema>;\r\n\r\nexport const CampaignAppliesToSchema = z.enum(['ALL', 'CATEGORIES', 'PRODUCTS']);\r\nexport type CampaignAppliesTo = z.infer<typeof CampaignAppliesToSchema>;\r\n\r\nexport const CampaignSchema = z.object({\r\n  id: z.string(),\r\n  tenantId: z.string(),\r\n  name: z.string(),\r\n  status: CampaignStatusSchema,\r\n  type: CampaignTypeSchema,\r\n  value: z.number(),\r\n  appliesTo: CampaignAppliesToSchema,\r\n  categoryIds: z.array(z.string()).optional(),\r\n  productIds: z.array(z.string()).optional(),\r\n  startAt: z.string().nullable().optional(),\r\n  endAt: z.string().nullable().optional(),\r\n  stackable: z.boolean().optional().default(false),\r\n  priority: z.number().optional().default(0),\r\n});\r\n\r\nexport type Campaign = z.infer<typeof CampaignSchema>;\r\n","import { z } from 'zod';\r\n\r\n/** Per-tenant delivery zone. No minOrder. */\r\nexport const DeliveryZoneSchema = z.object({\r\n  id: z.string(),\r\n  tenantId: z.string(),\r\n  name: z.string(),\r\n  fee: z.number(),\r\n  etaMinutes: z.number().optional(),\r\n  isActive: z.boolean().default(true),\r\n  sortOrder: z.number().optional(),\r\n});\r\n\r\nexport type DeliveryZone = z.infer<typeof DeliveryZoneSchema>;\r\n\r\n/** Snapshot stored with order for delivery details. */\r\nexport interface OrderDeliverySnapshot {\r\n  method: 'PICKUP' | 'DELIVERY';\r\n  zoneId?: string;\r\n  zoneName?: string;\r\n  fee?: number;\r\n  addressText?: string;\r\n}\r\n\r\nexport const DeliverySettingsSchema = z.object({\r\n  tenantId: z.string(),\r\n  modes: z.object({\r\n    pickup: z.boolean(),\r\n    delivery: z.boolean(),\r\n  }),\r\n  deliveryFee: z.number().optional(),\r\n  zones: z.array(DeliveryZoneSchema).optional(),\r\n});\r\n\r\nexport type DeliverySettings = z.infer<typeof DeliverySettingsSchema>;\r\n","import type { Campaign } from './campaign';\r\nimport type { OptionItem } from './product';\r\n\r\nexport interface PricedLine {\r\n  basePrice: number;\r\n  optionDelta: number;\r\n  campaignDiscount: number;\r\n  finalPrice: number;\r\n  campaign?: Campaign;\r\n}\r\n\r\n/**\r\n * Apply options price deltas to a base price.\r\n */\r\nexport function applyOptionDeltas(basePrice: number, items: OptionItem[]): number {\r\n  const delta = items.reduce((sum, i) => sum + (i.priceDelta ?? i.priceModifier ?? 0), 0);\r\n  return basePrice + delta;\r\n}\r\n\r\n/**\r\n * Apply single best campaign (highest priority) if not stackable.\r\n * Returns discount amount.\r\n */\r\nexport function applyCampaign(\r\n  price: number,\r\n  campaigns: Campaign[],\r\n  productId?: string,\r\n  categoryId?: string\r\n): { discount: number; campaign?: Campaign } {\r\n  const now = new Date().toISOString();\r\n  const active = campaigns.filter((c) => {\r\n    if (c.status !== 'active') return false;\r\n    if (c.startAt && c.startAt > now) return false;\r\n    if (c.endAt && c.endAt < now) return false;\r\n    if (c.appliesTo === 'CATEGORIES' && categoryId && c.categoryIds?.includes(categoryId)) return true;\r\n    if (c.appliesTo === 'PRODUCTS' && productId && c.productIds?.includes(productId)) return true;\r\n    if (c.appliesTo === 'ALL') return true;\r\n    return false;\r\n  });\r\n  if (active.length === 0) return { discount: 0 };\r\n  const best = active.sort((a, b) => (b.priority ?? 0) - (a.priority ?? 0))[0];\r\n  let discount = 0;\r\n  if (best.type === 'PERCENT') discount = (price * best.value) / 100;\r\n  else if (best.type === 'FIXED') discount = Math.min(best.value, price);\r\n  return { discount, campaign: best };\r\n}\r\n","import type { TenantBranding } from './types';\r\n\r\n/**\r\n * Parse subdomain to extract tenant ID for production.\r\n * e.g. \"acme.nmd-store.com\" -> \"acme\"\r\n */\r\nexport function parseSubdomainTenant(hostname: string): string | null {\r\n  const parts = hostname.split('.');\r\n  if (parts.length >= 2) {\r\n    const subdomain = parts[0];\r\n    if (subdomain && !['www', 'api', 'admin'].includes(subdomain.toLowerCase())) {\r\n      return subdomain;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Resolve tenant ID from URL params (dev) or subdomain (prod)\r\n */\r\nexport function resolveTenantId(\r\n  hostname: string,\r\n  searchParams: URLSearchParams\r\n): string | null {\r\n  const urlTenant = searchParams.get('tenantId');\r\n  if (urlTenant) return urlTenant;\r\n  return parseSubdomainTenant(hostname);\r\n}\r\n\r\nexport const LAST_TENANT_KEY = 'nmd.lastTenant';\r\n\r\n/**\r\n * Resolve tenant from URL (dev): ?tenant=slug or fallback to last selected in localStorage\r\n */\r\nexport function resolveTenantFromUrl(): string | null {\r\n  if (typeof window === 'undefined') return null;\r\n  const params = new URLSearchParams(window.location.search);\r\n  const slug = params.get('tenant');\r\n  if (slug) return slug;\r\n  return localStorage.getItem(LAST_TENANT_KEY);\r\n}\r\n\r\n/**\r\n * Persist last selected tenant for dev\r\n */\r\nexport function setLastTenant(slugOrId: string): void {\r\n  if (typeof window === 'undefined') return;\r\n  localStorage.setItem(LAST_TENANT_KEY, slugOrId);\r\n}\r\n\r\nconst LAYOUT_STYLES: Record<TenantBranding['layoutStyle'], { header: string; card: string; section: string; button: string; badge: string }> = {\r\n  minimal: { header: 'flat', card: 'flat', section: 'tight', button: 'square', badge: 'subtle' },\r\n  cozy: { header: 'soft', card: 'soft', section: 'medium', button: 'rounded', badge: 'soft' },\r\n  bold: { header: 'strong', card: 'strong', section: 'spacious', button: 'pill', badge: 'strong' },\r\n  modern: { header: 'clean', card: 'clean', section: 'medium', button: 'rounded', badge: 'clean' },\r\n  default: { header: 'soft', card: 'soft', section: 'medium', button: 'rounded', badge: 'soft' },\r\n  compact: { header: 'flat', card: 'flat', section: 'tight', button: 'square', badge: 'subtle' },\r\n  spacious: { header: 'strong', card: 'strong', section: 'spacious', button: 'pill', badge: 'strong' },\r\n};\r\n\r\n/**\r\n * Convert tenant branding to CSS variables for runtime theming\r\n */\r\nexport function tenantBrandingToCssVars(branding: TenantBranding): Record<string, string> {\r\n  const style = LAYOUT_STYLES[branding.layoutStyle] ?? LAYOUT_STYLES.default;\r\n  return {\r\n    '--color-primary': branding.primaryColor,\r\n    '--color-secondary': branding.secondaryColor,\r\n    '--radius': `${branding.radiusScale * 4}px`,\r\n    '--font': branding.fontFamily,\r\n    '--layout-header': style.header,\r\n    '--layout-card': style.card,\r\n    '--layout-section': style.section,\r\n    '--layout-button': style.button,\r\n    '--layout-badge': style.badge,\r\n  };\r\n}\r\n","/**\r\n * Centralized currency formatter for Israeli Shekel (₪).\r\n * Uses Intl.NumberFormat with he-IL for RTL-friendly output.\r\n */\r\nexport interface FormatMoneyOptions {\r\n  /** Currency code (default ILS) */\r\n  currency?: string;\r\n  /** Locale for formatting (default he-IL for RTL) */\r\n  locale?: string;\r\n  /** Minimum fraction digits */\r\n  minimumFractionDigits?: number;\r\n  /** Maximum fraction digits */\r\n  maximumFractionDigits?: number;\r\n}\r\n\r\n/**\r\n * Format amount as Israeli Shekel (₪).\r\n * Handles NaN/invalid safely; integers and floats supported.\r\n */\r\nexport function formatMoney(\r\n  amount: number,\r\n  opts: FormatMoneyOptions = {}\r\n): string {\r\n  const {\r\n    currency = 'ILS',\r\n    locale = 'he-IL',\r\n    minimumFractionDigits = 0,\r\n    maximumFractionDigits = 2,\r\n  } = opts;\r\n\r\n  const n = Number(amount);\r\n  if (Number.isNaN(n) || !Number.isFinite(n)) return '₪ 0';\r\n\r\n  return new Intl.NumberFormat(locale, {\r\n    style: 'currency',\r\n    currency,\r\n    minimumFractionDigits,\r\n    maximumFractionDigits,\r\n  }).format(n);\r\n}\r\n","import { formatMoney } from './utils/money.js';\r\n\r\n/**\r\n * Format price for display (ILS ₪).\r\n * @deprecated Prefer formatMoney from './utils/money'\r\n */\r\nexport function formatPrice(amount: number): string {\r\n  return formatMoney(amount);\r\n}\r\n\r\n/**\r\n * Generate a unique ID (simple, for mock/local use)\r\n */\r\nexport function generateId(): string {\r\n  return crypto.randomUUID?.() ?? `id-${Date.now()}-${Math.random().toString(36).slice(2)}`;\r\n}\r\n","import type { PizzaPlacement } from '../types/cart.js';\r\n\r\n/** Re-export for addon placement (WHOLE/LEFT/RIGHT). */\r\nexport type Placement = PizzaPlacement;\r\n\r\n/** Arabic labels for addon placement. Single source of truth. */\r\nexport const PLACEMENT_LABELS_AR = {\r\n  WHOLE: 'كامل',\r\n  LEFT: 'يسار',\r\n  RIGHT: 'يمين',\r\n} as const;\r\n\r\n/** Options for placement selector (value + Arabic label). */\r\nexport const PLACEMENT_OPTIONS_AR: { value: Placement; label: string }[] = [\r\n  { value: 'WHOLE', label: PLACEMENT_LABELS_AR.WHOLE },\r\n  { value: 'RIGHT', label: PLACEMENT_LABELS_AR.RIGHT },\r\n  { value: 'LEFT', label: PLACEMENT_LABELS_AR.LEFT },\r\n];\r\n\r\n/** Format placement to Arabic label, or undefined if no placement. */\r\nexport function formatPlacementAr(p?: Placement | null): string | undefined {\r\n  if (!p) return undefined;\r\n  return PLACEMENT_LABELS_AR[p as keyof typeof PLACEMENT_LABELS_AR] ?? p;\r\n}\r\n\r\n/** Format addon name with optional placement. Returns \"name\" or \"name (label)\". */\r\nexport function formatAddonNameWithPlacement(name: string, p?: Placement | null): string {\r\n  const label = formatPlacementAr(p);\r\n  return label ? `${name} (${label})` : name;\r\n}\r\n","import type { Order, Tenant } from '../types';\r\nimport { formatMoney } from './money.js';\r\nimport { formatAddonNameWithPlacement } from './placements.js';\r\n\r\n/**\r\n * Build WhatsApp message for order handoff (Arabic, short, clear).\r\n */\r\nexport function buildWhatsAppMessage(order: Order, tenant: Tenant): string {\r\n  const lines: string[] = [];\r\n  lines.push(`*طلب جديد - ${tenant.name}*`);\r\n  lines.push('');\r\n  lines.push(`#${order.id.slice(0, 8)}`);\r\n  lines.push(`التاريخ: ${new Date(order.createdAt).toLocaleDateString('ar-SA')}`);\r\n  lines.push('');\r\n  const delivery = (order as { delivery?: { method?: string; zoneName?: string; fee?: number; addressText?: string } }).delivery;\r\n  if (order.fulfillmentType === 'DELIVERY' || delivery?.method === 'DELIVERY') {\r\n    lines.push('طريقة الاستلام: توصيل');\r\n    if (delivery?.zoneName) lines.push(`المنطقة: ${delivery.zoneName}`);\r\n    if (delivery?.fee != null) lines.push(`سعر التوصيل: ₪${delivery.fee}`);\r\n    if (delivery?.addressText) lines.push(`العنوان: ${delivery.addressText}`);\r\n    else if (order.deliveryAddress) lines.push(`العنوان: ${order.deliveryAddress}`);\r\n  } else {\r\n    lines.push('طريقة الاستلام: استلام من المحل');\r\n  }\r\n  if (order.customerName) lines.push(`الاسم: ${order.customerName}`);\r\n  if (order.customerPhone) lines.push(`الجوال: ${order.customerPhone}`);\r\n  lines.push('');\r\n  lines.push('*العناصر:*');\r\n  for (const item of order.items) {\r\n    const optParts = item.selectedOptions\r\n      .map((s) => {\r\n        const g = item.optionGroups.find((x) => x.id === s.optionGroupId);\r\n        const ids = 'optionItemIds' in s ? s.optionItemIds : [];\r\n        const placements = 'optionPlacements' in s ? (s.optionPlacements ?? {}) : {};\r\n        return ids\r\n          .map((id) => {\r\n            const name = g?.items.find((i) => i.id === id)?.name;\r\n            if (!name) return '';\r\n            return formatAddonNameWithPlacement(name, placements[id]);\r\n          })\r\n          .filter(Boolean)\r\n          .join('، ');\r\n      })\r\n      .filter(Boolean)\r\n      .join(' | ');\r\n    lines.push(`• ${item.productName} x${item.quantity}${optParts ? ` (${optParts})` : ''}: ${formatMoney(item.totalPrice)}`);\r\n  }\r\n  lines.push('');\r\n  lines.push(`الإجمالي: ${formatMoney(order.total)}`);\r\n  if (order.notes) lines.push(`ملاحظات: ${order.notes}`);\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Check if a WhatsApp phone is valid (digits only, non-empty, reasonable length).\r\n * No fallback - phone must come from tenant.branding.whatsappPhone.\r\n */\r\nexport function isValidWhatsAppPhone(phone: string | undefined | null): boolean {\r\n  if (!phone || typeof phone !== 'string') return false;\r\n  const cleaned = phone.replace(/\\D/g, '');\r\n  return cleaned.length >= 9 && /^\\d+$/.test(cleaned);\r\n}\r\n\r\n/**\r\n * Build WhatsApp URL with pre-filled message.\r\n * Phone must be digits only (with country code). No fallback.\r\n */\r\nexport function buildWhatsAppUrl(phone: string, message: string): string {\r\n  const cleaned = phone.replace(/\\D/g, '');\r\n  const encoded = encodeURIComponent(message);\r\n  return `https://wa.me/${cleaned}?text=${encoded}`;\r\n}\r\n","import type { OptionGroup } from '../types/product.js';\r\nimport type { TenantStoreType } from '../types/tenant.js';\r\n\r\n/**\r\n * Filter option groups by tenant type.\r\n * - FOOD: only CUSTOM groups (hide SIZE, COLOR entirely).\r\n * - CLOTHING: allow SIZE, COLOR, CUSTOM.\r\n * - GENERAL: allow all.\r\n */\r\nexport function filterOptionGroupsForTenant(\r\n  tenantType: TenantStoreType | null | undefined,\r\n  groups: OptionGroup[]\r\n): OptionGroup[] {\r\n  if (!tenantType || tenantType === 'GENERAL') return groups;\r\n  if (tenantType === 'FOOD') {\r\n    return groups.filter((g) => (g.type ?? 'CUSTOM') === 'CUSTOM');\r\n  }\r\n  return groups;\r\n}\r\n","import type { Tenant, Category, Product } from '../types';\r\n\r\nexport const mockTenants: Record<string, Tenant> = {\r\n  default: {\r\n    id: 'default',\r\n    name: 'NMD Store',\r\n    slug: 'default',\r\n    branding: {\r\n      logoUrl: '/logo.svg',\r\n      primaryColor: '#0f766e',\r\n      secondaryColor: '#d4a574',\r\n      fontFamily: '\"Cairo\", system-ui, sans-serif',\r\n      radiusScale: 1,\r\n      layoutStyle: 'default',\r\n    },\r\n  },\r\n  pizzeria: {\r\n    id: 'pizzeria',\r\n    name: 'NMD Pizzeria',\r\n    slug: 'pizzeria',\r\n    branding: {\r\n      logoUrl: '/logo-pizza.svg',\r\n      primaryColor: '#b91c1c',\r\n      secondaryColor: '#fbbf24',\r\n      fontFamily: '\"Cairo\", system-ui, sans-serif',\r\n      radiusScale: 1.25,\r\n      layoutStyle: 'default',\r\n    },\r\n  },\r\n};\r\n\r\nexport const mockCategories: Record<string, Category[]> = {\r\n  default: [\r\n    { id: 'cat-1', tenantId: 'default', name: 'Appetizers', slug: 'appetizers', sortOrder: 0 },\r\n    { id: 'cat-2', tenantId: 'default', name: 'Main Dishes', slug: 'main-dishes', sortOrder: 1 },\r\n    { id: 'cat-3', tenantId: 'default', name: 'Beverages', slug: 'beverages', sortOrder: 2 },\r\n  ],\r\n  pizzeria: [\r\n    { id: 'pcat-1', tenantId: 'pizzeria', name: 'Pizzas', slug: 'pizzas', sortOrder: 0 },\r\n    { id: 'pcat-2', tenantId: 'pizzeria', name: 'Sides', slug: 'sides', sortOrder: 1 },\r\n  ],\r\n};\r\n\r\nexport const mockProducts: Record<string, Product[]> = {\r\n  default: [\r\n    {\r\n      id: 'prod-1',\r\n      tenantId: 'default',\r\n      categoryId: 'cat-1',\r\n      name: 'Hummus Bowl',\r\n      slug: 'hummus-bowl',\r\n      type: 'SIMPLE',\r\n      basePrice: 15,\r\n      currency: 'ILS',\r\n      images: [{ id: 'img-1', url: 'https://placehold.co/400x300?text=Hummus', sortOrder: 0 }],\r\n      optionGroups: [],\r\n      isAvailable: true,\r\n    },\r\n    {\r\n      id: 'prod-2',\r\n      tenantId: 'default',\r\n      categoryId: 'cat-2',\r\n      name: 'Grilled Chicken',\r\n      slug: 'grilled-chicken',\r\n      type: 'CONFIGURABLE',\r\n      basePrice: 45,\r\n      currency: 'ILS',\r\n      images: [{ id: 'img-2', url: 'https://placehold.co/400x300?text=Chicken', sortOrder: 0 }],\r\n      optionGroups: [\r\n        {\r\n          id: 'og-1',\r\n          name: 'Side',\r\n          required: true,\r\n          minSelected: 1,\r\n          maxSelected: 1,\r\n          selectionType: 'single',\r\n          items: [\r\n            { id: 'oi-1', name: 'Rice', priceModifier: 0, sortOrder: 0 },\r\n            { id: 'oi-2', name: 'Fries', priceModifier: 3, sortOrder: 1 },\r\n          ],\r\n        },\r\n      ],\r\n      isAvailable: true,\r\n    },\r\n    {\r\n      id: 'prod-3',\r\n      tenantId: 'default',\r\n      categoryId: 'cat-3',\r\n      name: 'Fresh Juice',\r\n      slug: 'fresh-juice',\r\n      type: 'CONFIGURABLE',\r\n      basePrice: 12,\r\n      currency: 'ILS',\r\n      images: [{ id: 'img-3', url: 'https://placehold.co/400x300?text=Juice', sortOrder: 0 }],\r\n      optionGroups: [\r\n        {\r\n          id: 'og-2',\r\n          name: 'Flavor',\r\n          required: true,\r\n          minSelected: 1,\r\n          maxSelected: 1,\r\n          selectionType: 'single',\r\n          items: [\r\n            { id: 'oi-3', name: 'Orange', priceModifier: 0, sortOrder: 0 },\r\n            { id: 'oi-4', name: 'Mango', priceModifier: 2, sortOrder: 1 },\r\n          ],\r\n        },\r\n      ],\r\n      isAvailable: true,\r\n    },\r\n    {\r\n      id: 'prod-4',\r\n      tenantId: 'default',\r\n      categoryId: 'cat-2',\r\n      name: 'Last Items Burger',\r\n      slug: 'last-items-burger',\r\n      type: 'SIMPLE',\r\n      basePrice: 35,\r\n      currency: 'ILS',\r\n      images: [{ id: 'img-4', url: 'https://placehold.co/400x300?text=Burger', sortOrder: 0 }],\r\n      optionGroups: [],\r\n      isAvailable: true,\r\n      isLastItems: true,\r\n      lastItemsCount: 3,\r\n    },\r\n  ],\r\n  pizzeria: [\r\n    {\r\n      id: 'pprod-1',\r\n      tenantId: 'pizzeria',\r\n      categoryId: 'pcat-1',\r\n      name: 'Margherita Pizza',\r\n      slug: 'margherita',\r\n      type: 'PIZZA',\r\n      basePrice: 55,\r\n      currency: 'ILS',\r\n      images: [{ id: 'pimg-1', url: 'https://placehold.co/400x300?text=Pizza', sortOrder: 0 }],\r\n      optionGroups: [\r\n        {\r\n          id: 'pog-1',\r\n          name: 'Size',\r\n          required: true,\r\n          minSelected: 1,\r\n          maxSelected: 1,\r\n          selectionType: 'single',\r\n          items: [\r\n            { id: 'poi-1', name: 'Regular', priceModifier: 0, sortOrder: 0 },\r\n            { id: 'poi-2', name: 'Large', priceModifier: 15, sortOrder: 1 },\r\n          ],\r\n        },\r\n        {\r\n          id: 'pog-2',\r\n          name: 'Extra Toppings',\r\n          required: false,\r\n          minSelected: 0,\r\n          maxSelected: 3,\r\n          selectionType: 'multi',\r\n          items: [\r\n            { id: 'poi-3', name: 'Mushrooms', priceModifier: 5, sortOrder: 0 },\r\n            { id: 'poi-4', name: 'Olives', priceModifier: 4, sortOrder: 1 },\r\n          ],\r\n        },\r\n      ],\r\n      isAvailable: true,\r\n    },\r\n  ],\r\n};\r\n"],"mappings":"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","names":["z"]}