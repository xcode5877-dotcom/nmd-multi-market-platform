{"version":3,"sources":["../src/orders-store.ts"],"sourcesContent":["import type { Order } from '@nmd/core';\r\n\r\nconst STORAGE_KEY = 'nmd.orders';\r\n\r\nfunction load(): Order[] {\r\n  try {\r\n    const raw = localStorage.getItem(STORAGE_KEY);\r\n    if (raw) return JSON.parse(raw);\r\n  } catch {\r\n    /* ignore */\r\n  }\r\n  return [];\r\n}\r\n\r\nfunction save(orders: Order[]): void {\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(orders));\r\n}\r\n\r\nexport function listOrders(): Order[] {\r\n  return load();\r\n}\r\n\r\nexport function listOrdersByTenant(tenantId: string): Order[] {\r\n  return load().filter((o) => o.tenantId === tenantId);\r\n}\r\n\r\nexport function getOrder(id: string): Order | null {\r\n  return load().find((o) => o.id === id) ?? null;\r\n}\r\n\r\nexport function updateOrderStatus(id: string, status: Order['status']): Order | null {\r\n  const orders = load();\r\n  const idx = orders.findIndex((o) => o.id === id);\r\n  if (idx === -1) return null;\r\n  orders[idx] = { ...orders[idx], status };\r\n  save(orders);\r\n  return orders[idx];\r\n}\r\n\r\nexport function getOrdersToday(): Order[] {\r\n  const today = new Date().toDateString();\r\n  return load().filter((o) => new Date(o.createdAt).toDateString() === today);\r\n}\r\n\r\nexport function getOrdersThisWeek(): Order[] {\r\n  const weekAgo = new Date();\r\n  weekAgo.setDate(weekAgo.getDate() - 7);\r\n  return load().filter((o) => new Date(o.createdAt) >= weekAgo);\r\n}\r\n\r\nexport function addOrder(order: Order): void {\r\n  const orders = load();\r\n  orders.push(order);\r\n  save(orders);\r\n}\r\n"],"mappings":";AAEA,IAAM,cAAc;AAEpB,SAAS,OAAgB;AACvB,MAAI;AACF,UAAM,MAAM,aAAa,QAAQ,WAAW;AAC5C,QAAI,IAAK,QAAO,KAAK,MAAM,GAAG;AAAA,EAChC,QAAQ;AAAA,EAER;AACA,SAAO,CAAC;AACV;AAEA,SAAS,KAAK,QAAuB;AACnC,eAAa,QAAQ,aAAa,KAAK,UAAU,MAAM,CAAC;AAC1D;AAEO,SAAS,aAAsB;AACpC,SAAO,KAAK;AACd;AAEO,SAAS,mBAAmB,UAA2B;AAC5D,SAAO,KAAK,EAAE,OAAO,CAAC,MAAM,EAAE,aAAa,QAAQ;AACrD;AAEO,SAAS,SAAS,IAA0B;AACjD,SAAO,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,KAAK;AAC5C;AAEO,SAAS,kBAAkB,IAAY,QAAuC;AACnF,QAAM,SAAS,KAAK;AACpB,QAAM,MAAM,OAAO,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE;AAC/C,MAAI,QAAQ,GAAI,QAAO;AACvB,SAAO,GAAG,IAAI,EAAE,GAAG,OAAO,GAAG,GAAG,OAAO;AACvC,OAAK,MAAM;AACX,SAAO,OAAO,GAAG;AACnB;AAEO,SAAS,iBAA0B;AACxC,QAAM,SAAQ,oBAAI,KAAK,GAAE,aAAa;AACtC,SAAO,KAAK,EAAE,OAAO,CAAC,MAAM,IAAI,KAAK,EAAE,SAAS,EAAE,aAAa,MAAM,KAAK;AAC5E;AAEO,SAAS,oBAA6B;AAC3C,QAAM,UAAU,oBAAI,KAAK;AACzB,UAAQ,QAAQ,QAAQ,QAAQ,IAAI,CAAC;AACrC,SAAO,KAAK,EAAE,OAAO,CAAC,MAAM,IAAI,KAAK,EAAE,SAAS,KAAK,OAAO;AAC9D;AAEO,SAAS,SAAS,OAAoB;AAC3C,QAAM,SAAS,KAAK;AACpB,SAAO,KAAK,KAAK;AACjB,OAAK,MAAM;AACb;","names":[]}