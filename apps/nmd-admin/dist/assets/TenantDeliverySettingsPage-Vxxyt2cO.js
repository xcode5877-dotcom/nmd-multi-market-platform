import{d as p,q as T,c as d,h as M,i as f,r as u,k as m,j as v,M as P}from"./index-BYQekpkv.js";const s=new P;function F(){const r=p(),e=T(),{data:i}=d({queryKey:["me",e==null?void 0:e.tenantId],queryFn:()=>s.getMe(),enabled:!1}),t=(e==null?void 0:e.tenantId)??r.tenantId??r.id??(i==null?void 0:i.tenantId);r.tenantId&&r.id;const c=M(),{addToast:o}=f(),[n,y]=u.useState({tenantType:"SHOP",deliveryProviderMode:"TENANT",allowMarketCourierFallback:!0,defaultPrepTimeMin:30}),{data:a,isLoading:k}=d({queryKey:["tenant-registry",t],queryFn:()=>s.getTenantById(t),enabled:!!t&&!1});return u.useEffect(()=>{a&&y({tenantType:a.tenantType??"SHOP",deliveryProviderMode:a.deliveryProviderMode??"TENANT",allowMarketCourierFallback:a.allowMarketCourierFallback??!0,defaultPrepTimeMin:a.defaultPrepTimeMin??30})},[a]),m({mutationFn:()=>s.patchTenantDeliverySettings(t,{tenantType:n.tenantType,deliveryProviderMode:n.deliveryProviderMode,allowMarketCourierFallback:n.allowMarketCourierFallback,defaultPrepTimeMin:n.defaultPrepTimeMin}),onSuccess:()=>{c.invalidateQueries({queryKey:["tenant-registry",t]}),o("تم الحفظ","success")},onError:l=>o(l instanceof Error?l.message:"فشل الحفظ","error")}),v.jsx("div",{className:"p-8 text-gray-500",children:"جاري التحميل..."})}export{F as default};
