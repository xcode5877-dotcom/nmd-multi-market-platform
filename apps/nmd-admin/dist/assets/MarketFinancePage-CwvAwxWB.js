import{d as g,a as f,r as o,c as i,j as c,B as b,M as y}from"./index-BYQekpkv.js";import{a as S}from"./api-CiuOvftP.js";import{A as k}from"./arrow-left-D6cBPTnX.js";const m=new y,h="",I=[{id:"today",label:"اليوم",getRange:()=>{const t=new Date().toISOString().slice(0,10);return{from:t,to:t}}},{id:"7d",label:"7 أيام",getRange:()=>{const e=new Date,t=new Date(e);return t.setDate(t.getDate()-6),{from:t.toISOString().slice(0,10),to:e.toISOString().slice(0,10)}}},{id:"month",label:"الشهر",getRange:()=>{const e=new Date,t=e.toISOString().slice(0,10);return{from:new Date(e.getFullYear(),e.getMonth(),1).toISOString().slice(0,10),to:t}}},{id:"custom",label:"مخصص",getRange:()=>null}];function K(){const{id:e}=g(),t=f(),[r,p]=o.useState("7d"),[d,F]=o.useState(""),[u,M]=o.useState(""),[R,v]=o.useState("tenants"),{from:a,to:n}=o.useMemo(()=>{if(r==="custom")return{from:d||void 0,to:u||void 0};const s=I.find(l=>l.id===r);return(s==null?void 0:s.getRange())??{from:void 0,to:void 0}},[r,d,u]),{data:w}=i({queryKey:["market",e],queryFn:()=>fetch(`${h}/markets/${e}`,{headers:S()}).then(s=>s.ok?s.json():Promise.reject(new Error("Not found"))),enabled:!!e&&!1}),{data:x,isLoading:L}=i({queryKey:["market-finance-summary",e,a,n],queryFn:()=>m.getMarketFinanceSummary(e,a,n),enabled:!!e&&!1}),{data:O,isLoading:j}=i({queryKey:["market-finance-tenants",e,a,n],queryFn:()=>m.getMarketFinanceTenants(e,a,n),enabled:!!e&&!1}),{data:q,isLoading:N}=i({queryKey:["market-finance-couriers",e,a,n],queryFn:()=>m.getMarketFinanceCouriers(e,a,n),enabled:!!e&&!1});return c.jsxs("div",{className:"py-8",children:[c.jsx(b,{variant:"ghost",size:"sm",onClick:()=>t("/markets"),className:"mb-4",children:c.jsx(k,{className:"w-4 h-4"})}),c.jsx("div",{className:"p-4 rounded-lg bg-amber-50 border border-amber-200 text-amber-800",children:"لتشغيل هذه الصفحة، ضبط VITE_MOCK_API_URL (مثال: http://localhost:5190)"})]})}export{K as default};
