import{u as S,b as I,c as v,r as P,d as x,j as t,S as k,E as q,B as N,m as h,f as $,M as E}from"./index-DqbWLIhh.js";import{P as M}from"./ProductCard-C-apWdln.js";import{P as A}from"./CategoryTabsSkeleton-CNpOOc5O.js";import"./cart-_Jxk0B-k.js";import"./shopping-cart-Cv9GfYq0.js";const m=new E;function F({tenantId:s}){const{data:d}=x({queryKey:["campaigns",s],queryFn:()=>m.getCampaigns(s),enabled:!!s}),r=((d==null?void 0:d.filter(i=>i.status==="active"))??[]).sort((i,l)=>(l.priority??0)-(i.priority??0))[0];if(!r)return null;const o=r.type==="PERCENT"?`Ø®ØµÙ… ${r.value}%`:`Ø®ØµÙ… ${$(r.value)}`;return t.jsx("div",{className:"mb-4 p-3 rounded-xl bg-primary/10 text-primary font-medium text-center",children:o})}const K="/admin";function G(){const{categoryId:s}=S(),d=I(),a=v(e=>e.tenantId)??"default",r=v(e=>e.tenantSlug),[o,i]=P.useState(null),{data:l}=x({queryKey:["menu",a],queryFn:()=>m.getMenu(a),enabled:!!a}),n=l==null?void 0:l.find(e=>e.id===s),c=(l??[]).filter(e=>e.parentId===s),p=!(n!=null&&n.parentId)||n.parentId==="",g=o||s,y=p&&c.length>0&&!o,b=x({queryKey:["products",a,y?"all":g],queryFn:()=>y?m.getProducts(a).then(e=>{const f=new Set(c.map(u=>u.id));return e.filter(u=>u.categoryId===s||f.has(u.categoryId))}):m.getProducts(a,g),enabled:!!a&&(y||!!g)}),j=b.data??[],C=b.isLoading,{data:w}=x({queryKey:["campaigns",a],queryFn:()=>m.getCampaigns(a),enabled:!!a});return C?t.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[t.jsx(k,{className:"h-8 w-48 mb-6"}),t.jsx(A,{count:6,columns:"2-3-4"})]}):j.length===0?t.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:(n==null?void 0:n.name)??"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"}),p&&c.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[t.jsx("button",{type:"button",onClick:()=>i(null),className:"px-4 py-2 rounded-full text-sm font-medium bg-primary text-white",children:"Ø§Ù„ÙƒÙ„"}),c.map(e=>t.jsx("button",{type:"button",onClick:()=>i(e.id),className:"px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200",children:e.name},e.id))]}),t.jsx(q,{title:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª",description:"Ù„Ù… ØªØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØªØµÙ†ÙŠÙ Ø¨Ø¹Ø¯.",icon:t.jsx("span",{className:"text-5xl",children:"ðŸ“¦"}),action:t.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[t.jsx(N,{variant:"outline",onClick:()=>d(`/${r||a}`),children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ØªØ¬Ø±"}),t.jsx("a",{href:`${K}?tenant=${r||a}`,target:"_blank",rel:"noopener noreferrer",children:t.jsx(N,{children:"Ø§ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"})})]})})]}):t.jsxs(h.div,{className:"max-w-6xl mx-auto p-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:[t.jsx(F,{tenantId:a}),t.jsx(h.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-2xl font-bold text-gray-900 mb-4",children:(n==null?void 0:n.name)??"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"}),p&&c.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[t.jsx("button",{type:"button",onClick:()=>i(null),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${o?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-primary text-white"}`,children:"Ø§Ù„ÙƒÙ„"}),c.map(e=>t.jsx("button",{type:"button",onClick:()=>i(e.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${o===e.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.name},e.id))]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:j.map((e,f)=>t.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.05},children:t.jsx(M,{product:e,campaigns:w??[]})},e.id))})]})}export{G as default};
