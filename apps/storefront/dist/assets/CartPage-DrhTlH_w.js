import{h as B,c as p,d as S,j as e,m as h,L as j,B as y,i as A,k as n,M as L}from"./index-DqbWLIhh.js";import{u as c}from"./cart-_Jxk0B-k.js";import{p as Q}from"./pricing-sLTXzm7K.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=B("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),G=new L;function $(){const s=p(t=>t.tenantId)??"default",l=p(t=>t.tenantSlug)??s,d=c(t=>t.getItems(s)),o=c(t=>t.updateQuantity),f=c(t=>t.removeItem),{data:b}=S({queryKey:["campaigns",s],queryFn:()=>G.getCampaigns(s),enabled:!!s}),{priced:N,subtotal:g,discountTotal:x,total:v}=Q(d,b??[]);return d.length===0?e.jsxs("div",{className:"max-w-2xl mx-auto p-8 text-center",dir:"rtl",children:[e.jsx(h.p,{initial:{opacity:0},animate:{opacity:1},className:"text-neutral-600 mb-6",children:"سلة التسوق فارغة"}),e.jsx(j,{to:l?`/${l}`:"/",children:e.jsx(y,{variant:"outline",children:"العودة للتسوق"})})]}):e.jsxs("div",{className:"max-w-5xl mx-auto p-4",dir:"rtl",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-6",children:"السلة"}),e.jsxs("div",{className:"grid lg:grid-cols-[1fr,320px] gap-8",children:[e.jsx("div",{className:"border border-neutral-200 rounded-xl overflow-hidden bg-white",children:N.map(({item:t,finalPrice:w,campaignDiscount:k,priceBeforeDiscount:I},C)=>e.jsxs(h.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:C*.03},className:"flex gap-4 p-4 border-b border-neutral-200 last:border-b-0",children:[e.jsx("img",{src:t.imageUrl??"https://placehold.co/96x96?text=No+Image",alt:t.productName,className:"w-20 h-20 md:w-24 md:h-24 object-cover rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 line-clamp-2",children:t.productName}),t.selectedOptions.length>0&&e.jsx("p",{className:"text-xs text-neutral-500 mt-0.5 line-clamp-2",children:t.selectedOptions.map(a=>{const i=t.optionGroups.find(r=>r.id===a.optionGroupId),q="optionItemIds"in a?a.optionItemIds:[],M="optionPlacements"in a?a.optionPlacements??{}:{};return q.map(r=>{var u;const m=(u=i==null?void 0:i.items.find(P=>P.id===r))==null?void 0:u.name;return m?A(m,M[r]):""}).filter(Boolean).join("، ")}).filter(Boolean).join(" • ")}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>o(s,t.id,Math.max(0,t.quantity-1)),className:"w-8 h-8 rounded-lg border border-neutral-200 hover:bg-neutral-50 flex items-center justify-center text-neutral-600","aria-label":"تقليل الكمية",children:"−"}),e.jsx("span",{className:"w-8 text-center text-sm font-medium",children:t.quantity}),e.jsx("button",{type:"button",onClick:()=>o(s,t.id,t.quantity+1),className:"w-8 h-8 rounded-lg border border-neutral-200 hover:bg-neutral-50 flex items-center justify-center text-neutral-600","aria-label":"زيادة الكمية",children:"+"})]})]}),e.jsxs("div",{className:"flex flex-col items-end justify-between",children:[e.jsx("button",{type:"button",onClick:()=>f(s,t.id),className:"text-neutral-400 hover:text-red-500 transition-colors p-1 -m-1","aria-label":"إزالة",children:e.jsx(T,{className:"w-4 h-4",strokeWidth:1.5})}),e.jsxs("div",{className:"text-end",children:[k>0&&e.jsx("p",{className:"text-xs text-neutral-400 line-through",children:n(I*t.quantity)}),e.jsx("p",{className:"font-semibold text-gray-900",children:n(w*t.quantity)})]})]})]},t.id))}),e.jsx("div",{className:"lg:sticky lg:top-24 self-start",children:e.jsxs("div",{className:"p-4 rounded-xl border border-neutral-200 bg-neutral-50/50",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-neutral-600",children:[e.jsx("span",{children:"المجموع الفرعي"}),e.jsx("span",{children:n(g)})]}),x>0&&e.jsxs("div",{className:"flex justify-between text-neutral-600",children:[e.jsx("span",{children:"الخصم"}),e.jsxs("span",{className:"text-primary",children:["-",n(x)]})]}),e.jsxs("div",{className:"flex justify-between text-neutral-600",children:[e.jsx("span",{children:"التوصيل"}),e.jsx("span",{children:"يُحسب عند الدفع"})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-neutral-200",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"المجموع النهائي"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:n(v)})]})]}),e.jsx(j,{to:l?`/${l}/checkout`:"/checkout",className:"block mt-4",children:e.jsx(y,{className:"w-full h-12 rounded-xl",children:"إتمام الطلب"})})]})})]})]})}export{$ as default};
