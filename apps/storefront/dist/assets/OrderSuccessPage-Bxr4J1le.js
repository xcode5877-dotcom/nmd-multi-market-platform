import{h as w,u as v,b as k,c as m,d as x,r as A,v as M,w as S,x as C,j as e,B as n,M as E}from"./index-DqbWLIhh.js";import{M as q}from"./message-circle-D7u3bX_s.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=w("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),u=new E;function F(){const{orderId:l,tenantSlug:p}=v(),i=k(),c=m(t=>t.tenantId)??"",h=m(t=>t.tenantSlug)??c,r=p??h??c,{data:a,isLoading:g,isError:b}=x({queryKey:["public-order",l],queryFn:async()=>{const t=await u.getPublicOrder(l);if(!t)throw new Error("NOT_FOUND");return t},enabled:!!l,retry:!1}),{data:s,isLoading:y,isError:f}=x({queryKey:["tenant",r],queryFn:()=>u.getTenant(r),enabled:!!r,retry:!1}),d=A.useMemo(()=>{var o;if(!a||!s)return null;const t=((o=s.branding)==null?void 0:o.whatsappPhone)??"";if(!M(t))return null;const N=S(a,s);return C(t,N)},[a,s]);if(g||y)return e.jsxs("div",{className:"max-w-md mx-auto p-8 text-center",dir:"rtl",children:[e.jsx("div",{className:"animate-spin w-10 h-10 border-2 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-gray-600 mt-4",children:"جاري التحميل..."})]});if(b||!a)return e.jsxs("div",{className:"max-w-md mx-auto p-8 text-center",dir:"rtl",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"تعذر تحميل الطلب. قد يكون الرابط غير صحيح."}),e.jsx(n,{className:"mt-4",onClick:()=>i(r?`/${r}`:"/"),children:"العودة للتسوق"})]});if(f||!s)return e.jsxs("div",{className:"max-w-md mx-auto p-8 text-center",dir:"rtl",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"المتجر غير موجود"}),e.jsx(n,{className:"mt-4",onClick:()=>i(r?`/${r}`:"/"),children:"العودة للتسوق"})]});const j=()=>{d&&window.open(d,"_blank")};return e.jsxs("div",{className:"max-w-md mx-auto p-6 md:p-10 min-h-[60vh] flex flex-col justify-center",dir:"rtl",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-emerald-500/15 text-emerald-600 flex items-center justify-center mx-auto mb-6 ring-4 ring-emerald-500/20",children:e.jsx("span",{className:"text-3xl font-bold",children:"✓"})}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:"تم استلام طلبك"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"شكراً لثقتك. سنتواصل معك قريباً."}),e.jsxs("div",{className:"inline-block px-8 py-4 rounded-2xl bg-primary/10 border border-primary/20",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"رقم الطلب"}),e.jsx("p",{className:"text-2xl font-mono font-bold text-primary tracking-wider",children:a.id.slice(0,8)})]})]}),e.jsxs("div",{className:"space-y-3",children:[d&&e.jsxs(n,{className:"w-full gap-2 justify-center bg-[#25D366] hover:bg-[#20bd5a] text-white py-3 text-base font-medium rounded-xl",onClick:j,children:[e.jsx(q,{className:"w-5 h-5"}),"فتح واتساب"]}),e.jsxs(n,{onClick:()=>i(s!=null&&s.slug?`/${s.slug}`:"/"),className:"w-full gap-2 justify-center py-3 text-base font-medium rounded-xl",children:[e.jsx(I,{className:"w-5 h-5"}),"العودة للتسوق"]})]})]})}export{F as default};
