import{h as y,r as x,c as d,K as b,d as f,j as e,L as h,T as N,p as w,O as v,M as S,P as T,k,Q as I}from"./index-DqbWLIhh.js";import{u as p}from"./cart-_Jxk0B-k.js";import{S as $}from"./shopping-cart-Cv9GfYq0.js";import{T as q}from"./truck-CHxBL2S5.js";import{M}from"./message-circle-D7u3bX_s.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=y("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),L=new S,g=!1;function A(){const[r,a]=x.useState(!1),n=d(s=>s.tenantId)??"",i=b(),{data:t}=f({queryKey:["tenant",n],queryFn:()=>L.getTenant(n),enabled:!!n}),l=p(s=>s.getItems(n).reduce((o,j)=>o+j.quantity,0)),{data:c}=f({queryKey:["tenants-mall"],queryFn:()=>T("dabburiyya"),enabled:g}),m=x.useMemo(()=>[],[g,c]);return e.jsx("header",{className:`sticky top-0 z-40 ${v(i)}`,children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[e.jsx(h,{to:t!=null&&t.slug?`/${t.slug}`:"/",className:"flex items-center gap-2 flex-shrink-0",children:t!=null&&t.branding.logoUrl?e.jsx("img",{src:t.branding.logoUrl,alt:t.name,className:"h-8"}):e.jsx("span",{className:"font-bold text-lg text-primary",children:(t==null?void 0:t.name)??"Store"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`relative overflow-hidden transition-all ${r?"w-28 sm:w-44":"w-24"}`,children:[e.jsx(C,{className:"absolute top-1/2 -translate-y-1/2 end-2 w-4 h-4 text-gray-400 pointer-events-none"}),e.jsx("input",{type:"search",placeholder:"بحث...",onFocus:()=>a(!0),onBlur:()=>a(!1),className:"w-full h-9 pe-9 ps-3 rounded-lg border border-gray-200 bg-gray-50 text-sm placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:bg-white"})]}),e.jsx(N,{tenants:m,currentTenant:(t==null?void 0:t.slug)??n,onSelect:s=>{w(s),window.location.href=`/${s}`},visible:!1}),e.jsxs(h,{to:t!=null&&t.slug?`/${t.slug}/cart`:"/cart",className:"relative p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":`Cart with ${l} items`,children:[e.jsx($,{className:"w-6 h-6 text-gray-700"}),l>0&&e.jsx("span",{className:"absolute -top-1 -end-1 bg-primary text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:l})]})]})]})})}function B(){const r=d(s=>s.tenantId)??"",a=d(s=>s.tenantSlug)??r,n=p(s=>(s.getItems(r)??[]).reduce((u,o)=>u+o.quantity,0)),i=p(s=>(s.getItems(r)??[]).reduce((u,o)=>u+o.totalPrice,0)),t=p(s=>s.lastAddTimestamp),[l,c]=x.useState(!1),m=x.useRef(void 0);return x.useEffect(()=>{if(t!=null&&t!==m.current){m.current=t,c(!0);const s=setTimeout(()=>c(!1),500);return()=>clearTimeout(s)}},[t]),n===0?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden",style:{height:"var(--cart-bar-height)"},"aria-hidden":!0}),e.jsx("div",{className:`md:hidden fixed bottom-0 start-0 end-0 z-40 bg-white/95 backdrop-blur-md border-t border-neutral-200 shadow-[0_-1px_3px_rgba(0,0,0,0.06)] transition-shadow ${l?"animate-pulse-once":""}`,style:{paddingTop:"0.75rem",paddingBottom:"calc(0.75rem + env(safe-area-inset-bottom, 0px))"},dir:"rtl",children:e.jsxs(h,{to:a?`/${a}/cart`:"/cart",className:"flex items-center justify-between gap-4 px-4 min-h-[3rem]",children:[e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[e.jsx("span",{className:"text-xs text-neutral-500",children:"المجموع"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:k(i)}),e.jsxs("span",{className:"text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-0.5 rounded-full",children:[n," قطعة"]})]})]}),e.jsx("span",{className:"flex items-center justify-center h-12 min-w-[7rem] px-6 rounded-xl bg-primary text-white font-medium text-base hover:opacity-90 active:opacity-95 transition-opacity",children:"عرض السلة"})]})})]})}const E=[{icon:F,label:"دفع نقدي"},{icon:q,label:"توصيل سريع"},{icon:M,label:"دعم واتساب"}];function P(){return e.jsx("div",{className:"bg-white border-b border-gray-100 py-2",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 flex flex-wrap items-center justify-center gap-6 md:gap-10 text-sm text-gray-600",children:E.map(({icon:r,label:a})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:a})]},a))})})}function _(){const r=d(t=>t.tenantName),a=d(t=>t.tenantSlug)??"",i=[{label:"الرئيسية",to:(a?`/${a}`:"")||"/"},{label:"السلة",to:a?`/${a}/cart`:"/cart"},{label:"تواصل",to:"#",external:!0},{label:"سياسة الخصوصية",to:"#",external:!0}];return e.jsx("footer",{className:"mt-auto border-t border-neutral-200 bg-white",dir:"rtl",role:"contentinfo",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6 md:py-8 pb-20 md:pb-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[e.jsx("nav",{className:"flex flex-wrap justify-center gap-x-6 gap-y-1","aria-label":"روابط سريعة",children:i.map(({label:t,to:l,external:c})=>c?e.jsx("a",{href:l,className:"text-sm font-medium text-neutral-600 hover:text-primary transition-colors",children:t},t):e.jsx(h,{to:l,className:"text-sm font-medium text-neutral-600 hover:text-primary transition-colors",children:t},t))}),e.jsx("p",{className:"text-xs text-neutral-500",children:"دفع آمن • توصيل سريع • استبدال سهل"}),e.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[e.jsx("p",{className:"text-xs text-neutral-400",children:"© 2026 سوق دبورية الرقمي — جميع الحقوق محفوظة"}),r&&e.jsx("p",{className:"text-xs text-neutral-400/80",children:r})]})]})})})}function O(){return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[e.jsx(A,{}),e.jsx(P,{}),e.jsx("main",{className:"flex-1 pb-[var(--cart-bar-height)] md:pb-0",children:e.jsx(I,{})}),e.jsx(_,{}),e.jsx(B,{})]})}export{O as default};
