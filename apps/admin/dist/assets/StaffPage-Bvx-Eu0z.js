import{u as f,O as v,r as d,j as e,B as o,C as N,Q as g,o as S,q as c,R as b,T as C}from"./index-D0pSccYm.js";const E={OWNER:"مالك",MANAGER:"مدير",STAFF:"موظف"};function y(){const{tenantId:m}=f(),h=v(m),[x,i]=d.useState(!1),[t,r]=d.useState(null),[l,s]=d.useState({name:"",phone:"",email:"",role:"STAFF"}),p=()=>{l.name.trim()&&(t?b(t.id,{name:l.name,phone:l.phone||void 0,email:l.email||void 0,role:l.role}):C({tenantId:m,name:l.name,phone:l.phone||void 0,email:l.email||void 0,role:l.role}),i(!1),r(null),s({name:"",phone:"",email:"",role:"STAFF"}))},u=a=>{r(a),s({name:a.name,phone:a.phone??"",email:a.email??"",role:a.role}),i(!0)},j=()=>{r(null),s({name:"",phone:"",email:"",role:"STAFF"}),i(!0)};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"الفريق"}),e.jsx(o,{onClick:j,children:"إضافة"})]}),e.jsx(N,{children:e.jsx("div",{className:"p-6",children:h.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"لا يوجد فريق. أضف أعضاء."}):e.jsx("div",{className:"divide-y divide-gray-200",children:h.map(a=>e.jsxs("div",{className:"py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:a.name}),e.jsxs("span",{className:"text-sm text-gray-500 me-2",children:["(",E[a.role],")"]}),a.phone&&e.jsx("span",{className:"text-sm text-gray-500",children:a.phone})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>u(a),disabled:a.role==="OWNER",children:"تعديل"}),e.jsx(o,{variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>g(a.id),disabled:a.role==="OWNER",children:"حذف"})]})]},a.id))})})}),e.jsxs(S,{open:x,onClose:()=>{i(!1),r(null)},title:t?"تعديل عضو":"إضافة عضو",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{label:"الاسم",value:l.name,onChange:a=>s(n=>({...n,name:a.target.value}))}),e.jsx(c,{label:"الجوال",value:l.phone,onChange:a=>s(n=>({...n,phone:a.target.value})),placeholder:"اختياري"}),e.jsx(c,{label:"البريد",value:l.email,onChange:a=>s(n=>({...n,email:a.target.value})),placeholder:"اختياري"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"الدور"}),e.jsxs("select",{value:l.role,onChange:a=>s(n=>({...n,role:a.target.value})),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"STAFF",children:"موظف"}),e.jsx("option",{value:"MANAGER",children:"مدير"}),(t==null?void 0:t.role)==="OWNER"&&e.jsx("option",{value:"OWNER",children:"مالك"})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx(o,{onClick:p,children:"حفظ"}),e.jsx(o,{variant:"ghost",onClick:()=>i(!1),children:"إلغاء"})]})]})]})}export{y as default};
