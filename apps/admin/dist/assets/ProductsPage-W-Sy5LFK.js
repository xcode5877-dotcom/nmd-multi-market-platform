import{u as xe,h as he,r as p,j as s,B as x,t as ge,C as ye,D as be,d as ve,q as f,S as F,e as Z,s as C}from"./index-D0pSccYm.js";import{u as fe}from"./useAdminData-iM1CNBvB.js";import"./admin-data-DX2UwLRf.js";const q=!1;function H(d){return[...d].sort((m,u)=>m.groupId.localeCompare(u.groupId)||m.optionId.localeCompare(u.optionId)).map(m=>`${m.groupId}:${m.optionId}`).join("|")}function $(d){const m=d.filter(c=>{var h;return(((h=c.items)==null?void 0:h.length)??0)>0});if(m.length===0)return[];const u=[[]];for(const c of m){const h=[];for(const j of u)for(const I of c.items)h.push([...j,{groupId:c.id,optionId:I.id}]);u.length=0,u.push(...h)}return u.map(c=>({id:C(),optionValues:c,stock:0}))}function je({onAdd:d}){const[m,u]=p.useState("");return s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{type:"text",value:m,onChange:c=>u(c.target.value),onKeyDown:c=>c.key==="Enter"&&(c.preventDefault(),d(m),u("")),placeholder:"+ Ø®ÙŠØ§Ø±",className:"w-24 border border-gray-300 rounded px-2 py-1 text-sm"}),s.jsx(x,{type:"button",size:"sm",onClick:()=>(d(m),u("")),children:"Ø¥Ø¶Ø§ÙØ©"})]})}function ke({product:d}){return d.inStock??!0?d.isLastItems&&(d.inStock??!0)?s.jsxs("span",{className:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-700",children:["Ø¢Ø®Ø± ",d.lastItemsCount??d.quantity??0]}):d.quantity!=null&&d.lowStockThreshold!=null&&d.quantity<=d.lowStockThreshold?s.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-700",children:d.quantity}):null:s.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700",children:"Ù†ÙØ¯"})}function Se(){const{tenantId:d,tenantType:m="GENERAL"}=xe(),u=he().addToast,c=fe(d),[h,j]=p.useState(()=>c.getProducts()),I=c.getCategories(),O=p.useRef(!0);p.useEffect(()=>{O.current&&!c.isLoading&&(j(c.getProducts()),O.current=!1),c.isLoading&&(O.current=!0)},[c.isLoading]);const[b,w]=p.useState(null),[B,k]=p.useState(!1),[L,A]=p.useState(!1),[N,P]=p.useState(null),[a,o]=p.useState({name:"",slug:"",description:"",categoryId:"",type:"SIMPLE",basePrice:0,imageUrl:"",images:[],optionGroups:[],variants:[],isFeatured:!1,inStock:!0,quantity:void 0,lowStockThreshold:void 0,isLastItems:!1,lastItemsCount:0}),[K,S]=p.useState(!1),[G,Ne]=p.useState(!1),[W,T]=p.useState(!1),E=p.useRef(null),_=()=>{if(!a.name.trim()||!a.categoryId)return;A(!0);const e=a.slug||a.name.toLowerCase().replace(/\s/g,"-"),t=[...a.images??[]].sort((r,i)=>r.sortOrder-i.sortOrder),n=t.length>0?t[0].url:a.imageUrl||void 0;if(b){const r=h.map(i=>i.id===b.id?{...i,name:a.name,slug:e,description:a.description.trim()||void 0,categoryId:a.categoryId,type:a.type,basePrice:a.basePrice,imageUrl:n,images:t,optionGroups:a.optionGroups,variants:a.variants,isFeatured:a.isFeatured,inStock:a.inStock,quantity:a.quantity,lowStockThreshold:a.lowStockThreshold,isLastItems:a.isLastItems,lastItemsCount:a.lastItemsCount}:i);j(r),c.setProducts(r)}else{const r=[...h,{id:C(),tenantId:d,categoryId:a.categoryId,name:a.name,slug:e,description:a.description.trim()||void 0,type:a.type,basePrice:a.basePrice,currency:"ILS",imageUrl:n,images:t,optionGroups:a.optionGroups,variants:a.variants,createdAt:new Date().toISOString(),isFeatured:a.isFeatured,isAvailable:a.inStock,inStock:a.inStock,stock:a.quantity,quantity:a.quantity,lowStockThreshold:a.lowStockThreshold,isLastItems:a.isLastItems,lastItemsCount:a.isLastItems?a.lastItemsCount:void 0}];j(r),c.setProducts(r)}k(!1),w(null),o({name:"",slug:"",description:"",categoryId:"",type:"SIMPLE",basePrice:0,imageUrl:"",images:[],optionGroups:[],variants:[],isFeatured:!1,inStock:!0,quantity:void 0,lowStockThreshold:void 0,isLastItems:!1,lastItemsCount:0}),A(!1),u("ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­","success")},X=e=>{const t=h.filter(n=>n.id!==e);j(t),c.setProducts(t),(b==null?void 0:b.id)===e&&(k(!1),w(null)),P(null),u("ØªÙ… Ø§Ù„Ø­Ø°Ù","success")},U=e=>{w(e);const t=e.quantity??e.stock,n=e.inStock??(t===void 0||t>0),r=(e.images??[]).sort((i,l)=>i.sortOrder-l.sortOrder);o({name:e.name,slug:e.slug,description:e.description??"",categoryId:e.categoryId,type:e.type,basePrice:e.basePrice,imageUrl:e.imageUrl??"",images:r,optionGroups:e.optionGroups??[],variants:e.variants??[],isFeatured:e.isFeatured??!1,inStock:n,quantity:t,lowStockThreshold:e.lowStockThreshold,isLastItems:e.isLastItems??!1,lastItemsCount:e.lastItemsCount??0}),k(!0)},J=()=>{var e;w(null),o({name:"",slug:"",description:"",categoryId:((e=I[0])==null?void 0:e.id)??"",type:"SIMPLE",basePrice:0,imageUrl:"",images:[],optionGroups:[],variants:[],isFeatured:!1,inStock:!0,quantity:void 0,lowStockThreshold:void 0,isLastItems:!1,lastItemsCount:0}),k(!0)},Q=()=>{const e=C();o(t=>({...t,optionGroups:[...t.optionGroups,{id:e,name:"",type:"CUSTOM",required:!0,minSelected:1,maxSelected:1,selectionType:"single",items:[]}]}))},Y=m==="FOOD"?[]:[{label:"Ù…Ù‚Ø§Ø³Ø§Øª Ù…Ù„Ø§Ø¨Ø³",type:"SIZE",items:["S","M","L","XL"]},{label:"Ù…Ù‚Ø§Ø³Ø§Øª Ø±Ù‚Ù…ÙŠØ©",type:"SIZE",items:["36","38","40","42"]},{label:"Ø£Ù„ÙˆØ§Ù† Ø´Ø§Ø¦Ø¹Ø©",type:"COLOR",items:["Ø£Ø³ÙˆØ¯","Ø£Ø¨ÙŠØ¶","Ø¨ÙŠØ¬","Ø£Ø²Ø±Ù‚"]}],ee=e=>{const t=C(),n=e.items.map((r,i)=>({id:C(),name:r,sortOrder:i}));o(r=>({...r,optionGroups:[...r.optionGroups,{id:t,name:e.label,type:e.type,required:!0,minSelected:1,maxSelected:1,selectionType:"single",items:n}]})),u(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© "${e.label}"`,"success")},D=(e,t)=>{o(n=>({...n,optionGroups:n.optionGroups.map(r=>r.id===e?{...r,...t}:r)}))},te=e=>{o(t=>({...t,optionGroups:t.optionGroups.filter(n=>n.id!==e),variants:t.variants.filter(n=>!n.optionValues.some(r=>r.groupId===e))}))},se=(e,t)=>{const n=C();o(r=>{const i=r.optionGroups.find(y=>y.id===e),l=(i==null?void 0:i.items)??[],v=r.type==="PIZZA"&&((i==null?void 0:i.type)??"CUSTOM")==="CUSTOM"?"HALF":void 0,g={id:n,name:t,sortOrder:l.length,placement:v};return{...r,optionGroups:r.optionGroups.map(y=>y.id===e?{...y,items:[...l,g]}:y)}})},ae=(e,t)=>{o(n=>({...n,optionGroups:n.optionGroups.map(r=>r.id===e?{...r,items:(r.items??[]).filter(i=>i.id!==t)}:r),variants:n.variants.filter(r=>!r.optionValues.some(i=>i.groupId===e&&i.optionId===t))}))},M=(e,t,n)=>{o(r=>({...r,optionGroups:r.optionGroups.map(i=>i.id===e?{...i,items:(i.items??[]).map(l=>l.id===t?{...l,...n}:l)}:i)}))},re=()=>{const e=a.optionGroups.filter(n=>{var r;return(((r=n.items)==null?void 0:r.length)??0)>0});if(e.length===0){u("Ø£Ø¶Ù Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø®ÙŠØ§Ø±Ø§Øª Ù…Ø¹ Ø¹Ù†Ø§ØµØ± Ø£ÙˆÙ„Ø§Ù‹","error");return}const t=$(e);o(n=>({...n,variants:t})),u(`ØªÙ… ØªÙˆÙ„ÙŠØ¯ ${t.length} Ù…ØªØºÙŠØ±`,"success")},ne=()=>{const e=a.optionGroups.filter(l=>{var v;return(((v=l.items)==null?void 0:v.length)??0)>0});if(e.length===0){o(l=>({...l,variants:[]})),u("Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø®ÙŠØ§Ø±Ø§Øª","info"),S(!1);return}const t=$(e),n=new Map(a.variants.map(l=>[H(l.optionValues),l])),r=t.map(l=>{const v=H(l.optionValues),g=n.get(v);return g?{...g,optionValues:l.optionValues}:l});o(l=>({...l,variants:r}));const i=a.variants.length-r.length;u(i>0?`ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆÙ„ÙŠØ¯. ØªÙ… Ø­Ø°Ù ${i} Ù…ØªØºÙŠØ±.`:"ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆÙ„ÙŠØ¯","success"),S(!1)},V=(e,t)=>{o(n=>({...n,variants:n.variants.map(r=>r.id===e?{...r,...t}:r)}))},ie=e=>{o(t=>({...t,variants:t.variants.filter(n=>n.id!==e)}))},oe=p.useCallback(e=>e.optionValues.map(t=>{var i;const n=a.optionGroups.find(l=>l.id===t.groupId),r=(i=n==null?void 0:n.items)==null?void 0:i.find(l=>l.id===t.optionId);return(r==null?void 0:r.name)??t.optionId}).join(" â€¢ "),[a.optionGroups]),R=async e=>{if(!e.length||!q){u("Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± ÙŠØªØ·Ù„Ø¨ ØªØ´ØºÙŠÙ„ Mock API","error");return}},le=async e=>{const t=e.target.files;t!=null&&t.length&&await R(Array.from(t)),e.target.value=""},ce=async e=>{e.preventDefault(),T(!1);const t=Array.from(e.dataTransfer.files).filter(n=>n.type.startsWith("image/"));t.length&&await R(t)},de=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.types.includes("Files")&&T(!0)},ue=e=>{e.preventDefault(),e.currentTarget.contains(e.relatedTarget)||T(!1)},me=e=>{o(t=>({...t,images:t.images.filter(n=>n.id!==e)}))},z=(e,t)=>{o(n=>{const r=[...n.images].sort((g,y)=>g.sortOrder-y.sortOrder),i=r.findIndex(g=>g.id===e);if(i===-1)return n;const l=t==="up"?i-1:i+1;if(l<0||l>=r.length)return n;[r[i],r[l]]=[r[l],r[i]];const v=r.map((g,y)=>({...g,sortOrder:y}));return{...n,images:v}})},pe=h.map(e=>({name:e.name,type:e.type,price:ge(e.basePrice),stock:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ke,{product:e}),(e.inStock??!0)&&!e.isLastItems&&e.quantity!=null&&(e.lowStockThreshold==null||e.quantity>e.lowStockThreshold)&&s.jsx("span",{className:"text-gray-500 text-sm",children:e.quantity})]}),actions:s.jsx("div",{onClick:t=>t.stopPropagation(),children:s.jsx(x,{variant:"outline",size:"sm",onClick:()=>U(e),children:"ØªØ¹Ø¯ÙŠÙ„"})})}));return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"}),s.jsx(x,{onClick:J,children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬"})]}),s.jsx(ye,{children:h.length===0?s.jsx("div",{className:"p-12 text-center text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª"}):s.jsx(be,{columns:[{key:"name",label:"Ø§Ù„Ø§Ø³Ù…"},{key:"type",label:"Ø§Ù„Ù†ÙˆØ¹"},{key:"price",label:"Ø§Ù„Ø³Ø¹Ø±"},{key:"stock",label:"Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"},{key:"actions",label:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª",className:"w-24"}],rows:pe,onRowClick:(e,t)=>U(h[t])})}),s.jsxs(ve,{open:B,onClose:()=>k(!1),title:b?"ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†ØªØ¬":"Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬",side:"start",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(f,{label:"Ø§Ù„Ø§Ø³Ù…",value:a.name,onChange:e=>o(t=>({...t,name:e.target.value}))}),s.jsx(f,{label:"Slug",value:a.slug,onChange:e=>o(t=>({...t,slug:e.target.value}))}),s.jsx(F,{label:"Ø§Ù„ØªØµÙ†ÙŠÙ",options:I.map(e=>({value:e.id,label:e.name})),value:a.categoryId,onChange:e=>o(t=>({...t,categoryId:e.target.value}))}),s.jsxs("div",{className:"space-y-1",dir:"rtl",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 ms-1",children:"ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬"}),s.jsx("textarea",{value:a.description,onChange:e=>o(t=>({...t,description:e.target.value})),placeholder:"Ù…Ø«Ø§Ù„: Ù‚Ù…Ø§Ø´ Ù‚Ø·Ù†ÙŠ Ù†Ø§Ø¹Ù…ØŒ Ù…Ù‚Ø§Ø³ Ø·Ø¨ÙŠØ¹ÙŠØŒ Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ...",className:"w-full min-h-[140px] ps-3 pe-3 py-3 rounded-[var(--radius)] border border-gray-300 bg-white text-gray-900 placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed resize-y",dir:"rtl"})]}),s.jsx(F,{label:"Ø§Ù„Ù†ÙˆØ¹",options:[{value:"SIMPLE",label:"Ø¨Ø³ÙŠØ·"},{value:"CONFIGURABLE",label:"Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ®ØµÙŠØµ"},{value:"PIZZA",label:"Ø¨ÙŠØªØ²Ø§"},{value:"APPAREL",label:"Ù…Ù„Ø§Ø¨Ø³"}],value:a.type,onChange:e=>o(t=>({...t,type:e.target.value}))}),s.jsx(f,{label:"Ø§Ù„Ø³Ø¹Ø± (â‚ª)",type:"number",value:a.basePrice,onChange:e=>o(t=>({...t,basePrice:+e.target.value}))}),s.jsxs("div",{className:"space-y-2",dir:"rtl",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±"}),s.jsx("input",{ref:E,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:le}),s.jsx("div",{onDragOver:de,onDragLeave:ue,onDrop:ce,className:`relative rounded-xl border-2 border-dashed transition-colors ${W?"border-primary bg-primary/5":"border-gray-300 hover:border-gray-400"} ${a.images.length>0?"p-3":"p-8"}`,children:a.images.length>0?s.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:[[...a.images].sort((e,t)=>e.sortOrder-t.sortOrder).map((e,t,n)=>s.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200 aspect-square bg-gray-50",children:[s.jsx("img",{src:e.url,alt:e.alt??"",className:"w-full h-full object-cover"}),s.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-1",children:[s.jsx(x,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 h-8 w-8 p-0 min-w-0",onClick:()=>z(e.id,"up"),disabled:t===0,title:"ØªØ­Ø±ÙŠÙƒ Ù„Ø£Ø¹Ù„Ù‰",children:"â†‘"}),s.jsx(x,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 h-8 w-8 p-0 min-w-0",onClick:()=>z(e.id,"down"),disabled:t===n.length-1,title:"ØªØ­Ø±ÙŠÙƒ Ù„Ø£Ø³ÙÙ„",children:"â†“"}),s.jsx(x,{variant:"ghost",size:"sm",className:"text-white hover:bg-red-500/80 h-8 w-8 p-0 min-w-0",onClick:()=>me(e.id),title:"Ø­Ø°Ù",children:"âœ•"})]}),s.jsx("span",{className:"absolute bottom-1 start-1 bg-black/60 text-white text-xs px-1.5 py-0.5 rounded",children:t+1})]},e.id)),q]}):s.jsxs("button",{type:"button",onClick:()=>{var e;return(e=E.current)==null?void 0:e.click()},disabled:G||!q,className:"w-full flex flex-col items-center justify-center gap-2 py-4 text-gray-500 hover:text-primary transition-colors",children:[G?s.jsx("span",{className:"w-10 h-10 border-2 border-primary/30 border-t-primary rounded-full animate-spin"}):s.jsx("span",{className:"text-4xl opacity-60",children:"ğŸ“·"}),s.jsx("span",{className:"text-sm font-medium",children:G?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹...":"Ø§Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ± Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„Ø±ÙØ¹"}),s.jsx("span",{className:"text-xs text-amber-600",children:"ÙŠØªØ·Ù„Ø¨ ØªØ´ØºÙŠÙ„ Mock API"})]})}),s.jsx(f,{label:"Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© (ÙŠØªØ·Ù„Ø¨ Mock API Ù„Ù„Ø±ÙØ¹ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±)",value:a.imageUrl,onChange:e=>o(t=>({...t,imageUrl:e.target.value})),placeholder:"https://..."})]}),s.jsxs("div",{className:"space-y-3",dir:"rtl",children:[s.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª (Ù…Ù‚Ø§Ø³ØŒ Ù„ÙˆÙ†)"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[Y.map(e=>s.jsxs(x,{variant:"outline",size:"sm",onClick:()=>ee(e),className:"text-xs",children:["+ ",e.label]},e.label)),s.jsx(x,{variant:"outline",size:"sm",onClick:Q,children:"Ø¥Ø¶Ø§ÙØ© Ù…Ø¬Ù…ÙˆØ¹Ø©"})]})]}),a.optionGroups.map(e=>s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx(f,{label:"Ø§Ù„Ø§Ø³Ù…",value:e.name,onChange:t=>D(e.id,{name:t.target.value}),placeholder:"Ù…Ù‚Ø§Ø³ / Ø¥Ø¶Ø§ÙØ§Øª",className:"flex-1 min-w-[80px]"}),s.jsx(F,{label:"Ø§Ù„Ù†ÙˆØ¹",options:m==="FOOD"?[{value:"CUSTOM",label:"Ù…Ø®ØµØµ"}]:[{value:"SIZE",label:"Ù…Ù‚Ø§Ø³"},{value:"COLOR",label:"Ù„ÙˆÙ†"},{value:"CUSTOM",label:"Ù…Ø®ØµØµ"}],value:m==="FOOD"?"CUSTOM":e.type??"CUSTOM",onChange:t=>D(e.id,{type:t.target.value}),disabled:m==="FOOD"}),a.type==="PIZZA"&&e.type==="CUSTOM"&&s.jsxs("label",{className:"flex items-center gap-2 mt-6",children:[s.jsx("input",{type:"checkbox",checked:e.allowHalfPlacement??!1,onChange:t=>D(e.id,{allowHalfPlacement:t.target.checked}),className:"rounded border-gray-300"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Ù†ØµÙ (Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©)"})]}),s.jsx(x,{variant:"ghost",size:"sm",className:"text-red-600 mt-6",onClick:()=>te(e.id),children:"Ø­Ø°Ù"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[(e.items??[]).map(t=>s.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1.5 bg-gray-100 rounded-lg text-sm",children:[s.jsx("span",{className:"min-w-[4rem]",children:t.name}),s.jsx("input",{type:"number",min:0,step:.5,placeholder:"+â‚ª",value:t.priceDelta??"",onChange:n=>M(e.id,t.id,{priceDelta:n.target.value?+n.target.value:void 0}),className:"w-14 border border-gray-200 rounded px-1.5 py-0.5 text-xs"}),a.type==="PIZZA"&&e.type==="CUSTOM"&&s.jsxs("label",{className:"flex items-center gap-1",title:"ÙŠØ¯Ø¹Ù… Ù†ØµÙ (ÙŠÙ…ÙŠÙ†/ÙŠØ³Ø§Ø±)",children:[s.jsx("input",{type:"checkbox",checked:(t.placement??(e.allowHalfPlacement?"HALF":"WHOLE"))==="HALF",onChange:n=>M(e.id,t.id,{placement:n.target.checked?"HALF":"WHOLE"}),className:"rounded border-gray-300"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Ù†ØµÙ"})]}),s.jsx("button",{type:"button",onClick:()=>ae(e.id,t.id),className:"text-red-500 hover:text-red-700",children:"Ã—"})]},t.id)),s.jsx(je,{onAdd:t=>{t.trim()&&se(e.id,t.trim())}})]})]},e.id)),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(x,{variant:"outline",size:"sm",onClick:re,children:"ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª"}),a.variants.length>0&&s.jsx(x,{variant:"outline",size:"sm",onClick:()=>S(!0),children:"Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆÙ„ÙŠØ¯"})]})]}),a.variants.length>0&&s.jsxs("div",{className:"space-y-2",dir:"rtl",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª (",a.variants.length,")"]}),s.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 rounded-lg",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-start p-2",children:"Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª"}),s.jsx("th",{className:"text-start p-2 w-24",children:"Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"}),s.jsx("th",{className:"text-start p-2 w-24",children:"Ø³Ø¹Ø± Ø¥Ø¶Ø§ÙÙŠ (â‚ª)"}),s.jsx("th",{className:"w-10"})]})}),s.jsx("tbody",{children:a.variants.map(e=>s.jsxs("tr",{className:"border-t border-gray-100",children:[s.jsx("td",{className:"p-2",children:oe(e)}),s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"number",min:0,value:e.stock,onChange:t=>V(e.id,{stock:+t.target.value}),className:"w-full border rounded px-2 py-1 text-sm"})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"number",min:0,step:.01,value:e.priceOverride??"",onChange:t=>V(e.id,{priceOverride:t.target.value?+t.target.value:void 0}),placeholder:"â€”",className:"w-full border rounded px-2 py-1 text-sm"})}),s.jsx("td",{className:"p-2",children:s.jsx("button",{type:"button",onClick:()=>ie(e.id),className:"text-red-500 hover:text-red-700 text-xs",children:"Ø­Ø°Ù"})})]},e.id))})]})})]}),s.jsxs("label",{className:`flex items-center gap-3 px-4 py-3 rounded-xl border-2 transition-colors cursor-pointer ${a.isFeatured?"border-amber-400 bg-amber-50":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx("input",{type:"checkbox",checked:a.isFeatured,onChange:e=>o(t=>({...t,isFeatured:e.target.checked})),className:"w-4 h-4 rounded border-gray-300 text-amber-500 focus:ring-amber-400"}),s.jsx("span",{className:"text-lg",children:"â­"}),s.jsx("span",{className:"font-medium text-gray-800",children:"Ù…Ù…ÙŠØ² ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:a.inStock,onChange:e=>o(t=>({...t,inStock:e.target.checked}))}),"Ù…ØªÙˆÙØ±"]}),s.jsx(f,{label:"Ø§Ù„ÙƒÙ…ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",type:"number",value:a.quantity??"",onChange:e=>o(t=>({...t,quantity:e.target.value?+e.target.value:void 0}))}),s.jsx(f,{label:"Ø­Ø¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",type:"number",value:a.lowStockThreshold??"",onChange:e=>o(t=>({...t,lowStockThreshold:e.target.value?+e.target.value:void 0}))}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:a.isLastItems,onChange:e=>o(t=>({...t,isLastItems:e.target.checked}))}),"Ø¢Ø®Ø± Ù‚Ø·Ø¹"]}),a.isLastItems&&s.jsx(f,{label:"Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹",type:"number",value:a.lastItemsCount,onChange:e=>o(t=>({...t,lastItemsCount:+e.target.value}))})]}),s.jsxs("div",{className:"sticky bottom-0 mt-6 pt-4 pb-4 -mb-4 -mx-4 px-4 bg-white border-t border-gray-200 flex gap-2",children:[s.jsx(x,{onClick:_,disabled:L,children:L?s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸..."]}):"Ø­ÙØ¸"}),s.jsx(x,{variant:"ghost",onClick:()=>k(!1),disabled:L,children:"Ø¥Ù„ØºØ§Ø¡"}),b&&s.jsx(x,{variant:"ghost",className:"text-red-600",onClick:()=>P(b),children:"Ø­Ø°Ù"})]})]}),s.jsx(Z,{open:!!N,onClose:()=>P(null),onConfirm:()=>N&&X(N.id),title:"Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬",message:`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù "${N==null?void 0:N.name}"ØŸ`,confirmLabel:"Ø­Ø°Ù",variant:"danger"}),s.jsx(Z,{open:K,onClose:()=>S(!1),onConfirm:ne,title:"Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª",message:"Ø³ÙŠØªÙ… Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ§Ù„Ø³Ø¹Ø± Ù„Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø©. Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªÙŠ Ù„Ù… ØªØ¹Ø¯ Ù…ÙˆØ¬ÙˆØ¯Ø© Ø³ØªÙØ­Ø°Ù.",confirmLabel:"Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆÙ„ÙŠØ¯"})]})}export{Se as default};
